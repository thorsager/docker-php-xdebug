#!/usr/bin/env bash
set -e

function convert {
  VAR=$(echo $1 | cut -d '=' -f1)
  VAL=$(echo $1 | cut -d '=' -f2)
  VAR=${VAR##XDEBUG_}
  VAR=${VAR,,}
  echo "xdebug.${VAR}=${VAL}" >> $2
}

echo "# Generated by $0" > $1
echo "zend_extension=$(find /usr/local/lib/php/extensions/ -name xdebug.so)" >> $1
for v in $(env); do
  # echo $v
  case $v in
    XDEBUG_*)
      convert "$v" "$1"
    ;;
  esac
done
